<!DOCTYPE html>
<html>
<head>
    <title>De Nyanya Cashier</title>
    <style>
        body {
            font-family: Arial;
            background-color: #000000;
            color: #FFFFFF;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h2 { font-size: 2em; text-decoration: underline; }
        h3 { font-size: 1.5em; margin: 15px 0; }
        .button-group { margin: 10px; }
        button {
            padding: 10px 20px;
            margin: 5px;
            background-color: #FFFFFF;
            color: #000000;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover { background-color: #CCCCCC; }
        table {
            margin: 20px auto;
            border-collapse: collapse;
            background-color: #333333;
        }
        th, td {
            border: 1px solid #FFFFFF;
            padding: 8px;
            color: #FFFFFF;
        }
        .coffee-icon { width: 30px; vertical-align: middle; margin-right: 10px; }
        #currentOrder { margin: 20px; font-size: 1.2em; }
    </style>
</head>
<body>
    <h2>De Nyanya Cashier</h2>
    <img src="https://via.placeholder.com/50" alt="Coffee Icon" class="coffee-icon">
    <h3>Minuman</h3>
    <div class="button-group">
        <button onclick="addItem('Blue Lemon', 5)">Blue Lemon (RM 5)</button>
        <button onclick="addItem('Apple', 5)">Apple (RM 5)</button>
        <button onclick="addItem('Blackcurrant', 5)">Blackcurrant (RM 5)</button>
        <button onclick="addItem('Boba Milktea', 5)">Boba Milktea (RM 5)</button>
        <button onclick="addItem('F&N Oren', 1)">F&N Oren (RM 1)</button>
        <button onclick="addItem('F&N Soda', 1)">F&N Soda (RM 1)</button>
        <button onclick="addItem('F&N Fruity', 1)">F&N Fruity (RM 1)</button>
        <button onclick="addItem('F&N Strawberry', 1)">F&N Strawberry (RM 1)</button>
        <button onclick="addItem('Pepsi', 1)">Pepsi (RM 1)</button>
        <button onclick="addItem('A&W', 1)">A&W (RM 1)</button>
        <button onclick="addItem('Cola', 1)">Cola (RM 1)</button>
        <button onclick="addItem('Cola Zero', 1)">Cola Zero (RM 1)</button>
        <button onclick="addItem('Susu Berisi', 3)">Susu Berisi (RM 3)</button>
    </div>
    <h3>Lain-lain</h3>
    <div class="button-group">
        <button onclick="addItem('Popis', 1.50)">Popis (RM 1.50)</button>
        <button onclick="addItem('Roti Sosij', 1)">Roti Sosij (RM 1)</button>
        <button onclick="addItem('Donut', 0.60)">Donut (RM 0.60)</button>
    </div>
    <div id="currentOrder">Order Semasa: <span id="currentItems"></span> | Jumlah: RM <span id="total">0</span></div>
    <button onclick="addOrder()">Sahkan Order</button>
    <button onclick="exportToGoogleSheets()">Eksport ke Google Sheets</button>

    <h3>Senarai Order</h3>
    <table id="orderTable">
        <tr>
            <th>Order #</th>
            <th>Item & Jumlah</th>
            <th>Total (RM)</th>
        </tr>
    </table>

    <script>
        let orderCount = 0;
        let orders = [];
        let currentOrder = {};

        function addItem(name, price) {
            currentOrder[name] = (currentOrder[name] || 0) + 1;
            updateCurrentOrder();
        }

        function updateCurrentOrder() {
            let itemsText = Object.entries(currentOrder)
                .map(([name, qty]) => `${name} x${qty}`)
                .join(", ") || "Tiada item";
            let total = Object.entries(currentOrder)
                .reduce((sum, [name, qty]) => sum + qty * getPrice(name), 0);
            document.getElementById("currentItems").innerText = itemsText;
            document.getElementById("total").innerText = total.toFixed(2);
        }

        function getPrice(item) {
            const prices = {
                "Blue Lemon": 5, "Apple": 5, "Blackcurrant": 5, "Boba Milktea": 5,
                "F&N Oren": 1, "F&N Soda": 1, "F&N Fruity": 1, "F&N Strawberry": 1,
                "Pepsi": 1, "A&W": 1, "Cola": 1, "Cola Zero": 1, "Susu Berisi": 3,
                "Popis": 1.50, "Roti Sosij": 1, "Donut": 0.60
            };
            return prices[item] || 0;
        }

        function addOrder() {
            let total = parseFloat(document.getElementById("total").innerText);
            if (total === 0) {
                alert("Sila tambah sekurang-kurangnya satu item!");
                return;
            }
            orderCount++;
            let items = Object.entries(currentOrder)
                .map(([name, qty]) => `${name} x${qty}`)
                .join(", ");
            orders.push({ id: orderCount, items: items, total: total });
            updateOrderTable();
            currentOrder = {};
            updateCurrentOrder();
        }

        function updateOrderTable() {
            let table = document.getElementById("orderTable");
            while (table.rows.length > 1) table.deleteRow(1);
            orders.forEach(order => {
                let row = table.insertRow();
                row.insertCell(0).innerText = order.id;
                row.insertCell(1).innerText = order.items;
                row.insertCell(2).innerText = order.total.toFixed(2);
            });
        }

        function exportToGoogleSheets() {
            if (orders.length === 0) {
                alert("Tiada order untuk dieksport!");
                return;
            }
            let csvContent = "Order #,Item & Jumlah,Total (RM)\n" + 
                orders.map(order => `${order.id},${order.items},${order.total.toFixed(2)}`).join("\n");
            let spreadsheetId = "YOUR_SPREADSHEET_ID_HERE"; // Ganti dengan ID Spreadsheet awak
            let sheetName = "Orders"; // Nama sheet dalam Google Sheets
            let url = `https://script.google.com/macros/s/YOUR_SCRIPT_ID_HERE/exec?spreadsheetId=${spreadsheetId}&sheetName=${sheetName}&data=${encodeURIComponent(csvContent)}`;

            fetch(url)
                .then(response => response.text())
                .then(data => alert("Data dieksport ke Google Sheets: " + data))
                .catch(error => alert("Ralat semasa eksport: " + error));
        }
    </script>
</body>
</html>
